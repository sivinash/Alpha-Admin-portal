<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Admin Dashboard</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='dashboard.css') }}"
    />
    <style>

    </style>
  </head>
  <body>
    <div class="dashboard">
      <div class="sidebar">
        <div class="sidebar-header">
          <div class="profile-container" >
              <img
                src="{{admin.img}}"
                alt="User  profile picture showing a professional headshot"
              />
              <button class="profile-button"><a href="{{ url_for('open_profile', admin=admin.username) }}">+</a></button>
          </div>
          <div style="width: 20%;">
            <h3>{{admin.username}}</h3>
          </div>
        </div>
        <div class="sidebar-menu">
          <h4>Main</h4>
          <ul>
            <li>
              <a href="{{url_for('dashboard')}}" class="" id="navdashboard"
                ><i class="fas fa-home"></i><span>Dashboard</span></a
              >
            </li>
            <li>
              <a href="{{url_for('product')}}" onclick="" class="" id="navproduct" onclick="Product()"
                ><i class="fas fa-box-open"></i><span>Procdut</span></a
              >
            </li>
            <li>
              <a href="{{url_for('add_product')}}" onclick="" class="" 
                ><i class="fas fa-plus-circle"></i><span>Add Product</span></a
              >
            </li>
            <li>
              <a href="{{url_for('view_orders')}}" ><i class="fas fa-shopping-cart"></i><span>View Orders</span></a>
            </li>
            <li>
              <a href="{{url_for('view_order_history')}}"><i class="fas fa-history"></i><span>View histrory</span></a>
            </li>
          </ul>
          <h4>Administration</h4>
          <ul>
            <li>
              <a href="{{url_for('addadmin')}}"
               class="" ><i class="fas fa-user-plus"></i></i><span> Add Admins</span></a
              >
            </li>
            {% if(admin.id==1) %}
            <li>
              <a href="{{url_for('ManageAdmin')}}" class="active">
                <i class="fas fa-user-cog"></i><span>Manage Admin</span>
              </a>
            </li>
            {% endif %}
          </ul>
          <h4>Other</h4>
          <ul>
            <li>
              <a href="{{url_for('logout')}}"
                ><i class="fas fa-sign-out-alt"></i><span>Logout</span></a
              >
            </li>
          </ul>
        </div>
      </div>
      <div class="main-content" style="display: block;width: 50% ;">
        <div id="dashboard-content" style="display: block; width: 100%">
          <div class="header">
            <h1>Dashboard Overview</h1>
            <input type="text" placeholder="Search products..." value=''  oninput="filterProducts()" name="search" id="search3"/>
            <div class="user-profile">
            <div class="profile-container" >
              <img
                src="{{admin.img}}"
                alt="User  profile picture showing a professional headshot"
              />
              <button class="profile-button"><a href="{{ url_for('open_profile', admin=admin.username) }}">+</a></button>
            </div>
            <div style="width: 0%;">
              <h4>{{admin.username}}</h4>
              <h4>{{admin.email}}</h4>
              <h4>{{admin.phone}}</h4>
            </div>
          </div>
        </div>  
        <div class="recent-orders" style="display: block;">
          <h3>Admins_list</h3>
          <div id="orders-list" style="width:100%;">
            {% for admin in Admin_list %}
            <div class="total-admin" admin-id="{{admin.id}}" admin-name="{{admin.name}}">
              <div class="listitem">
                {% if(admin.img) %}
                <img src="{{admin.img}}" class="adminimg" alt="User  profile picture" />
                {% else %}
                <img src="https://placehold.co/40" class="adminimg" alt="User  profile picture" />
                {% endif %}
              </div>
              <div class="listitem"><span class="order-id">ID: {{ admin.id }}</span></div>
              <div class="listitem"><span class="order-date">Name:{{ admin.name }}</span></div>
              <div class="listitem">
                {% if(admin.id!=1) %}
                <button class="view-details2" onclick="deleteadmin(`{{admin.id}}`)"><i class="fas fa-trash-alt" ></i></button>
                {% else %}
                <span>you</span>
                {% endif %}
              </div> 
            </div>  
            {% endfor %}        
          </div>
        </div>
      </div>
    </div>

    <script>
      function deleteadmin(adminid) {
        console.log(adminid);
        if (confirm("Are you sure you want to delete this admin?",adminid)) {
          console.log(adminid);
          fetch(`/deleteadmin/${adminid}`, {
                method: 'DELETE',
                headers: {
                    'Content-Type': 'application/json'
                }
            }).then(Response=>Response.json())
            .then(data=>console.log(data.message),location.reload())
            .catch(error=>console.error(error));
      }
    }
function filterProducts() {
    const searchInput = document.getElementById('search3').value.toLowerCase().replace('-','');
    const orderitems = document.querySelectorAll('.total-admin');
    
    orderitems.forEach(item => {
        const id = item.getAttribute('admin-id').toLowerCase();
        const name = item.getAttribute('admin-name').toLowerCase(); // Corrected variable name

        // Check if the search input matches any of the attributes
        if (id.includes(searchInput) || name.includes(searchInput)) {
            item.style.display = ''; // Show the row
        } else {
            item.style.display = 'none'; // Hide the row
        }
    });
}
    </script>
</html>